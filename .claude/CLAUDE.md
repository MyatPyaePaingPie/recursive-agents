# Recursive Language Models (RLM)

**TIER:** 2 (Production-grade research implementation)
**STACK:** Python 3.10+ | Pydantic | pytest-asyncio | RestrictedPython | OpenAI/Anthropic/Groq/Ollama APIs
**DOMAIN:** Library (AI/ML research - code generation & execution)

---

## Project Constraints

### Research Context
This implements "Recursive Language Models" (2025 paper). Core concept: LLMs overcome fixed context limits by writing code to recursively process arbitrarily long inputs.

### Components
- **RecursiveInferenceEngine**: Orchestrates recursive prompt processing
- **Code Generation Module**: Generates safe Python code
- **Execution Sandbox**: Runs code with RestrictedPython/Docker
- **Context Manager**: Chunking and state across recursive calls
- **Sub-model Handler**: LLM invocations and aggregation

### Key Files
- `src/rlm/core/engine.py`: Recursive inference engine
- `src/rlm/execution/sandbox.py`: Code execution safety
- `src/rlm/context/manager.py`: Context chunking
- `src/rlm/models/base.py`: LLM interface

---

## Coding Rules (Project-Specific)

### Tier 2 Requirements
```
T2: REAL | Production-grade, maintainable (DEFAULT)

Requirements:
- Full type hints (Python 3.10+ syntax)
- Docstrings: Google style
- Async/await for all I/O
- Composition over inheritance
- Pydantic for validation
```

### Testing Requirements
```
T2 MINIMUM:
- [ ] Unit: all components
- [ ] Integration: critical paths
- [ ] Edge: nulls, empty, bounds
- [ ] Error: failures handled
- [ ] Speed: < 30s total

TARGET: 80%+ coverage
FIXTURES: mock_llm, temp_context, sandbox_env
MARKERS: slow, integration, security, requires_api
```

### Validation Protocol
```
PRE-WRITE:
- [ ] State what, why, dependencies
- [ ] Interfaces defined (inputs/outputs/errors)
- [ ] Done-when criteria explicit
- [ ] Working pattern found
- [ ] Pause if anything unclear

PRE-COMMIT:
- [ ] Matches spec exactly? Nothing more?
- [ ] Connects to adjacent components?
- [ ] 3 edge cases confirmed?
- [ ] Linter clean?
- [ ] Types correct?
```

### Security (CRITICAL)
```
- NEVER execute untrusted code without sandboxing
- ALWAYS set execution timeouts (default: 5s)
- RESTRICT file system access in sandbox
- RESTRICT network access in sandbox
- LOG all code execution for audit
- VALIDATE all inputs with Pydantic
```

### Avoid
- `eval()`/`exec()` without sandboxing
- Synchronous blocking I/O
- Global state (use dependency injection)

---

## KERNEL: Self-Evolving Configuration

KERNEL progressively builds Claude Code config based on observed patterns.

### Pattern -> Artifact Mapping

| When You Notice... | Create This |
|-------------------|-------------|
| Same multi-step workflow repeated 2+ times | `.claude/commands/workflow-name.md` |
| Task needing specialized expertise | `.claude/agents/specialist-name.md` |
| External service integration needed | Entry in `.mcp.json` |
| Pre/post processing on tool usage | Hook in `.claude/settings.json` |
| Domain capability used repeatedly | `.claude/skills/capability/SKILL.md` |
| User states explicit preference | `.claude/rules/topic.md` |

### Guidelines

- Conservative: Clear, repeated patterns only
- Minimal: Start simple
- Ask first: Confirm if unsure
- Check existing: Avoid duplicates
- **Read CONFIG-TYPES.md before creating artifacts**

### On-Demand Methodology

Methodology banks available via commands (zero token cost until used):

- `/discover` - Map codebase, populate state
- `/plan` - Get-it-right-first-time planning (loads PLANNING-BANK)
- `/debug` - Systematic diagnosis (loads DEBUGGING-BANK)
- `/review` - Correctness validation (loads REVIEW-BANK)
- `/branch` - Create worktree for isolated development
- `/ship` - Commit, push, create PR
- `/parallelize` - Set up multiple worktrees for parallel streams

### Living Knowledge

- `kernel/state.md` - Current project reality (read first when uncertain)
- `kernel/banks/` - Methodology references (load via commands)
- `.claude/rules/` - Project patterns (evolves over time)

---

## Relationship to User-Level Config

Universal principles (philosophy, git workflow, defaults) live in `~/.claude/CLAUDE.md`.
This file contains PROJECT-SPECIFIC additions that take precedence.

**Full precedence chain:**
1. This file (project-specific, highest priority)
2. ~/.claude/CLAUDE.md (universal principles)
3. Plugin defaults (lowest priority)

---

Generated by KERNEL `/kernel:kernel-init`
Source: CODING-PROMPT-BANK v1.1
Last updated: 2026-01-11T16:00:00Z
